
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.0">
    
    
      
        <title>Augmentation - text_explainability</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.fe914879.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ba0d045b.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="#80d8ff">
  
    
    <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-text_explainabilitydataaugmentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="text_explainability" class="md-header__button md-logo" aria-label="text_explainability" data-md-component="logo">
      
  <img src="https://i.ibb.co/pvkkWqZ/Text-Logo-Logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            text_explainability
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Augmentation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://git.science.uu.nl/m.j.robeer/text_explainability.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    text_explainability
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="text_explainability" class="md-nav__button md-logo" aria-label="text_explainability" data-md-component="logo">
      
  <img src="https://i.ibb.co/pvkkWqZ/Text-Logo-Logo-white.png" alt="logo">

    </a>
    text_explainability
  </label>
  
    <div class="md-nav__source">
      
<a href="https://git.science.uu.nl/m.j.robeer/text_explainability.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    text_explainability
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../docs/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../example_usage/" class="md-nav__link">
        Example usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../CHANGELOG/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" checked>
      
      <label class="md-nav__link" for="__nav_5_1">
        Text Explainability
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Text Explainability" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Text Explainability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../decorators/" class="md-nav__link">
        Decorators
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../default/" class="md-nav__link">
        Default
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../global_explanation/" class="md-nav__link">
        Global Explanation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Index
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../internationalization/" class="md-nav__link">
        Internationalization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../local_explanation/" class="md-nav__link">
        Local Explanation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../locale/" class="md-nav__link">
        Locale
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_9" type="checkbox" id="__nav_5_1_9" checked>
      
      <label class="md-nav__link" for="__nav_5_1_9">
        Data
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_9">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Augmentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Augmentation
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leaveout" class="md-nav__link">
    LeaveOut
  </a>
  
    <nav class="md-nav" aria-label="LeaveOut">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary_inactive" class="md-nav__link">
    binary_inactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard_children" class="md-nav__link">
    discard_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_children" class="md-nav__link">
    get_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perturb" class="md-nav__link">
    perturb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register_child" class="md-nav__link">
    register_child
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localtokenpertubator" class="md-nav__link">
    LocalTokenPertubator
  </a>
  
    <nav class="md-nav" aria-label="LocalTokenPertubator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_1" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods_1" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary_inactive_1" class="md-nav__link">
    binary_inactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard_children_1" class="md-nav__link">
    discard_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_children_1" class="md-nav__link">
    get_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perturb_1" class="md-nav__link">
    perturb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register_child_1" class="md-nav__link">
    register_child
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tokenreplacement" class="md-nav__link">
    TokenReplacement
  </a>
  
    <nav class="md-nav" aria-label="TokenReplacement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_2" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_1" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods_2" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary_inactive_2" class="md-nav__link">
    binary_inactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_2" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard_children_2" class="md-nav__link">
    discard_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_children_2" class="md-nav__link">
    get_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perturb_2" class="md-nav__link">
    perturb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register_child_2" class="md-nav__link">
    register_child
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../embedding/" class="md-nav__link">
        Embedding
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../weights/" class="md-nav__link">
        Weights
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_10" type="checkbox" id="__nav_5_1_10" >
      
      <label class="md-nav__link" for="__nav_5_1_10">
        Generation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Generation" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_10">
          <span class="md-nav__icon md-icon"></span>
          Generation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../generation/feature_selection/" class="md-nav__link">
        Feature Selection
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../generation/" class="md-nav__link">
        Index
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../generation/return_types/" class="md-nav__link">
        Return Types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../generation/surrogate/" class="md-nav__link">
        Surrogate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../generation/target_encoding/" class="md-nav__link">
        Target Encoding
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leaveout" class="md-nav__link">
    LeaveOut
  </a>
  
    <nav class="md-nav" aria-label="LeaveOut">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary_inactive" class="md-nav__link">
    binary_inactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard_children" class="md-nav__link">
    discard_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_children" class="md-nav__link">
    get_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perturb" class="md-nav__link">
    perturb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register_child" class="md-nav__link">
    register_child
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localtokenpertubator" class="md-nav__link">
    LocalTokenPertubator
  </a>
  
    <nav class="md-nav" aria-label="LocalTokenPertubator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_1" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods_1" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary_inactive_1" class="md-nav__link">
    binary_inactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard_children_1" class="md-nav__link">
    discard_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_children_1" class="md-nav__link">
    get_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perturb_1" class="md-nav__link">
    perturb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register_child_1" class="md-nav__link">
    register_child
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tokenreplacement" class="md-nav__link">
    TokenReplacement
  </a>
  
    <nav class="md-nav" aria-label="TokenReplacement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_2" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_1" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods_2" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary_inactive_2" class="md-nav__link">
    binary_inactive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_2" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard_children_2" class="md-nav__link">
    discard_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get_children_2" class="md-nav__link">
    get_children
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perturb_2" class="md-nav__link">
    perturb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register_child_2" class="md-nav__link">
    register_child
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="module-text_explainabilitydataaugmentation">Module text_explainability.data.augmentation</h1>
<p>Augment a single instance to generate neighborhood data.</p>
<p>Todo:
    * Add more complex sampling methods (e.g. top-k replacement by contextual language model, WordNet, ...)
    * Replacement with k tokens at each index
    * Ensure inactive[i] is set to 0 if the replacement token is the same as the original token[i]</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>&quot;&quot;&quot;Augment a single instance to generate neighborhood data.

Todo:

    * Add more complex sampling methods (e.g. top-k replacement by contextual language model, WordNet, ...)

    * Replacement with k tokens at each index

    * Ensure inactive[i] is set to 0 if the replacement token is the same as the original token[i]

&quot;&quot;&quot;

from instancelib.environment.base import AbstractEnvironment

from instancelib.environment.text import TextEnvironment

from instancelib.instances.base import InstanceProvider

import numpy as np

import math

import itertools

from typing import (Callable, Iterable, Any, Iterator, Tuple, Optional, List, Union)

from instancelib.instances.text import TextInstance

from instancelib.pertubations.base import MultiplePertubator, ChildGenerator

from text_explainability.default import Readable

from text_explainability.decorators import text_instance

from text_explainability.utils import default_detokenizer

class LocalTokenPertubator(MultiplePertubator[TextInstance],

                           ChildGenerator[TextInstance],

                           Readable):

    def __init__(self,

                 env: Optional[AbstractEnvironment[TextInstance, Any, Any, Any, Any, Any]] = None,

                 detokenizer: Optional[Callable[[Iterable[str]], str]] = default_detokenizer):

        &quot;&quot;&quot;Perturb a single instance into neighborhood samples.

        Args:

            detokenizer (Callable[[Iterable[str]], str]): Mapping back from a tokenized instance

                to a string used in a predictor.

        &quot;&quot;&quot;

        super().__init__()

        if env is None:

            env = TextEnvironment.from_data([], [], [], [], [])

        self.env = env

        self.detokenizer = detokenizer

    @staticmethod

    def binary_inactive(inactive, length) -&gt; np.ndarray:

        res = np.ones(length, dtype=int)

        inactive = [res for res in inactive]

        res[inactive] = 0

        return res

    def perturb(self, tokenized_instance: Iterable[str],

                *args: Any, **kwargs: Any) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        raise NotImplementedError

    def discard_children(self, parent: TextInstance) -&gt; None:

        &quot;&quot;&quot;Discard the generated children for a given parent.&quot;&quot;&quot;

        self.env.discard_children(parent)

    def get_children(self, parent: TextInstance) -&gt; InstanceProvider[TextInstance, Any, Any, Any, Any]:

        &quot;&quot;&quot;Get the children of a given parent.&quot;&quot;&quot;

        return self.env.get_children(parent)

    @text_instance(tokenize=True)

    def __call__(self,

                 instance: TextInstance,

                 discard_children: bool = True,

                 *args,

                 **kwargs) -&gt; Iterator[TextInstance]:

        &quot;&quot;&quot;Apply perturbations to an instance to generate neighborhood data.

        Args:

            instance (TextInstance): Tokenized instance to perturb.

            discard_children (bool, optional): Remove children from previous passes. Defaults to True.

            *args: Arguments to be passed on to `perturb()` function.

            **kwargs: Keyword arguments to be passed on to `perturb()` function.

        Yields:

            Iterator[Sequence[TextInstance]]: Neighborhood data instances.

        &quot;&quot;&quot;

        assert hasattr(instance, &#39;tokenized&#39;), &#39;Tokenize your instance before applying a perturbation&#39;

        if instance.data not in self.env.all_instances.all_data():

            provider = self.env.create_empty_provider()

            provider.add(instance)

        if discard_children:

            self.discard_children(instance)

        for new_tokenized, map_to_original in self.perturb(instance.tokenized, *args, **kwargs):

            new_data = self.detokenizer(new_tokenized)

            new_instance = self.env.create(

                data=new_data,

                vector=None,

                map_to_original=map_to_original,

                representation=new_data,

                tokenized=new_tokenized

                )

            self.register_child(instance, new_instance)

        return self.get_children(instance)

class TokenReplacement(LocalTokenPertubator):

    def __init__(self,

                 env: Optional[AbstractEnvironment[TextInstance, Any, Any, Any, Any, Any]] = None,

                 detokenizer: Optional[Callable[[Iterable[str]], str]] = default_detokenizer,

                 replacement: Optional[Union[str, List[str]]] = &#39;UNKWRDZ&#39;,

                 seed: int = 0):

        &quot;&quot;&quot;Perturb a tokenized instance by replacing with a set token (e.g. &#39;UNKWRDZ&#39;) or deleting it.

        Args:

            detokenizer (Callable[[Iterable[str]], str]): Mapping back from a tokenized instance to a string used in a

                predictor.

            replacement (Optional[Union[str, List[str]]], optional): Replacement string, or set to None

                if you want to delete the word entirely. Defaults to &#39;UNKWRDZ&#39;.

            seed (int, optional): Seed for reproducibility. Defaults to 0.

        &quot;&quot;&quot;

        super().__init__(env=env, detokenizer=detokenizer)

        self.replacement = replacement

        self._seed = seed

    def _replace(self,

                 tokenized_instance: Iterable[str],

                 keep: Iterable[int]) -&gt; Iterable[str]:

        &quot;&quot;&quot;Apply replacement/deletion to tokenized instance.

        Args:

            tokenized_instance (Iterable[str]): Tokenized instance.

            keep (Iterable[int]): Binary indicator whether to keep (1) or replace (0) a token.

        Returns:

            Iterable[str]: Tokenized instance with perturbation applied.

        &quot;&quot;&quot;

        if not self.replacement or self.replacement is None:

            return [token for token, i in zip(tokenized_instance, keep) if i == 1]

        if isinstance(self.replacement, list):

            instance_len = sum(1 for _ in tokenized_instance)

            replacement_len = len(self.replacement)

            assert replacement_len &gt;= instance_len, \

                f&#39;Too few replacements in `self.replacement`, got {replacement_len} and expected {instance_len}&#39;

            return [self.replacement[i] if j == 0 else token

                    for i, (token, j) in enumerate(zip(tokenized_instance, keep))]

        return [self.replacement if i == 0 else token for token, i in zip(tokenized_instance, keep)]

    def perturb(self,

                tokenized_instance: Iterable[str],

                n_samples: int = 50,

                sequential: bool = True,

                contiguous: bool = False,

                min_changes: int = 1,

                max_changes: int = 10000,

                add_background_instance: bool = False) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        &quot;&quot;&quot;Perturb a tokenized instance by replacing it with a single replacement token (e.g. &#39;UNKWRDZ&#39;),

        which is assumed not to be part of the original tokens.

        Args:

            tokenized_instance (Iterable[str]): Tokenized instance to apply perturbations to.

            n_samples (int, optional): Number of samples to return. Defaults to 50.

            sequential (bool, optional): Whether to sample sequentially based on length (first length one, then two,

                etc.). Defaults to True.

            contiguous (bool, optional): Whether to remove contiguous sequences of tokens (n-grams). Defaults to False.

            min_changes (int, optional): Minimum number of tokens changes (1+). Defaults to 1.

            max_changes (int, optional): Maximum number of tokens changed. Defaults to 10000.

            add_background_instance (bool, optional): Add an additional instance with all tokens replaced.

                Defaults to False.

        Yields:

            Iterator[Sequence[Iterable[str], Iterable[int]]]: Pertubed text instances and indices where

                perturbation were applied.

        &quot;&quot;&quot;

        instance_len = sum(1 for _ in tokenized_instance)

        min_changes = min(max(min_changes, 1), instance_len)

        max_changes = min(instance_len, max_changes)

        assert min_changes &lt;= max_changes, \

            f&#39;Unable to produce any perturbations since min_changes={min_changes} and max_changes={max_changes}&#39;

        rand = np.random.RandomState(self._seed)

        def get_inactive(inactive_range):

            inactive = TokenReplacement.binary_inactive(inactive_range, instance_len)

            return self._replace(tokenized_instance, inactive), inactive

        if sequential:

            if contiguous:  # n-grams of length size, up to n_samples

                for size in range(min_changes, max_changes + 1):

                    n_contiguous = instance_len - size

                    if n_contiguous &lt;= n_samples:

                        n_samples -= n_contiguous

                        for start in range(instance_len - size + 1):

                            yield get_inactive(range(start, start + size))

                    else:

                        for start in rand.choice(instance_len - size + 1, replace=False):

                            yield get_inactive(range(start, start + size))

                        break

            else:  # used by SHAP

                for size in range(min_changes, max_changes + 1):

                    n_choose_k = math.comb(instance_len, size)

                    if n_choose_k &lt;= n_samples:  # make all combinations of length size

                        n_samples -= n_choose_k

                        for disable in itertools.combinations(range(instance_len), size):

                            yield get_inactive(disable)

                    else:  # fill up remainder with random samples of length size

                        for _ in range(n_samples):

                            yield get_inactive(rand.choice(instance_len, size, replace=False))

                        break

        else:

            sample = rand.randint(min_changes, max_changes + 1, n_samples)

            for size in sample:

                if contiguous:  # use n-grams

                    start = rand.choice(max_changes - size + 1, replace=False)

                    inactive = TokenReplacement.binary_inactive(range(start, start + size), instance_len)

                # used by LIME,

                # https://github.com/marcotcr/lime/blob/a2c7a6fb70bce2e089cb146a31f483bf218875eb/lime/lime_text.py#L436

                else:

                    inactive = TokenReplacement.binary_inactive(rand.choice(instance_len, size, replace=False),

                                                                instance_len)

                yield self._replace(tokenized_instance, inactive), inactive

        if add_background_instance:

            inactive = np.zeros(instance_len)

            yield self._replace(tokenized_instance, inactive), inactive

class LeaveOut(TokenReplacement):

    def __init__(self,

                 env: Optional[AbstractEnvironment[TextInstance, Any, Any, Any, Any, Any]] = None,

                 detokenizer: Optional[Callable[[Iterable[str]], str]] = default_detokenizer,

                 seed: int = 0):

        &quot;&quot;&quot;Leave tokens out of the tokenized sequence.

        Args:

            detokenizer (Callable[[Iterable[str]], str]): Mapping back from a tokenized

                instance to a string used in a predictor.

            seed (int, optional): Seed for reproducibility. Defaults to 0.

        &quot;&quot;&quot;

        super().__init__(env=env, detokenizer=detokenizer, replacement=None, seed=seed)
</code></pre></div>
</td></tr></table>
</details>
<h2 id="classes">Classes</h2>
<h3 id="leaveout">LeaveOut</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LeaveOut</span><span class="p">(</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">instancelib</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">AbstractEnvironment</span><span class="p">[</span><span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">detokenizer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">word_detokenizer</span> <span class="n">at</span> <span class="mh">0x16ddd3f70</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">)</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>class LeaveOut(TokenReplacement):

    def __init__(self,

                 env: Optional[AbstractEnvironment[TextInstance, Any, Any, Any, Any, Any]] = None,

                 detokenizer: Optional[Callable[[Iterable[str]], str]] = default_detokenizer,

                 seed: int = 0):

        &quot;&quot;&quot;Leave tokens out of the tokenized sequence.

        Args:

            detokenizer (Callable[[Iterable[str]], str]): Mapping back from a tokenized

                instance to a string used in a predictor.

            seed (int, optional): Seed for reproducibility. Defaults to 0.

        &quot;&quot;&quot;

        super().__init__(env=env, detokenizer=detokenizer, replacement=None, seed=seed)
</code></pre></div>
</td></tr></table>
</details>
<hr />
<h4 id="ancestors-in-mro">Ancestors (in MRO)</h4>
<ul>
<li>text_explainability.data.augmentation.TokenReplacement</li>
<li>text_explainability.data.augmentation.LocalTokenPertubator</li>
<li>instancelib.pertubations.base.MultiplePertubator</li>
<li>instancelib.pertubations.base.ChildGenerator</li>
<li>abc.ABC</li>
<li>typing.Generic</li>
<li>text_explainability.default.Readable</li>
</ul>
<h4 id="static-methods">Static methods</h4>
<h4 id="binary_inactive">binary_inactive</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">binary_inactive</span><span class="p">(</span>
    <span class="n">inactive</span><span class="p">,</span>
    <span class="n">length</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    @staticmethod

    def binary_inactive(inactive, length) -&gt; np.ndarray:

        res = np.ones(length, dtype=int)

        inactive = [res for res in inactive]

        res[inactive] = 0

        return res
</code></pre></div>
</td></tr></table>
</details>
<h4 id="methods">Methods</h4>
<h4 id="discard_children">discard_children</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">discard_children</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
<p>Discard the generated children for a given parent.</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def discard_children(self, parent: TextInstance) -&gt; None:

        &quot;&quot;&quot;Discard the generated children for a given parent.&quot;&quot;&quot;

        self.env.discard_children(parent)
</code></pre></div>
</td></tr></table>
</details>
<h4 id="get_children">get_children</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">InstanceProvider</span>
</code></pre></div>
</td></tr></table>
<p>Get the children of a given parent.</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def get_children(self, parent: TextInstance) -&gt; InstanceProvider[TextInstance, Any, Any, Any, Any]:

        &quot;&quot;&quot;Get the children of a given parent.&quot;&quot;&quot;

        return self.env.get_children(parent)
</code></pre></div>
</td></tr></table>
</details>
<h4 id="perturb">perturb</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perturb</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tokenized_instance</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">n_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
    <span class="n">sequential</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">contiguous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">min_changes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">max_changes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="n">add_background_instance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span>
</code></pre></div>
</td></tr></table>
<p>Perturb a tokenized instance by replacing it with a single replacement token (e.g. 'UNKWRDZ'), </p>
<p>which is assumed not to be part of the original tokens.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>tokenized_instance</td>
<td>Iterable[str]</td>
<td>Tokenized instance to apply perturbations to.</td>
<td>None</td>
</tr>
<tr>
<td>n_samples</td>
<td>int</td>
<td>Number of samples to return. Defaults to 50.</td>
<td>50</td>
</tr>
<tr>
<td>sequential</td>
<td>bool</td>
<td>Whether to sample sequentially based on length (first length one, then two,</td>
<td></td>
</tr>
<tr>
<td>etc.). Defaults to True.</td>
<td>None</td>
<td></td>
<td></td>
</tr>
<tr>
<td>contiguous</td>
<td>bool</td>
<td>Whether to remove contiguous sequences of tokens (n-grams). Defaults to False.</td>
<td>False</td>
</tr>
<tr>
<td>min_changes</td>
<td>int</td>
<td>Minimum number of tokens changes (1+). Defaults to 1.</td>
<td>1</td>
</tr>
<tr>
<td>max_changes</td>
<td>int</td>
<td>Maximum number of tokens changed. Defaults to 10000.</td>
<td>10000</td>
</tr>
<tr>
<td>add_background_instance</td>
<td>bool</td>
<td>Add an additional instance with all tokens replaced.</td>
<td></td>
</tr>
<tr>
<td>Defaults to False.</td>
<td>None</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Iterator[Sequence[Iterable[str], Iterable[int]]]</td>
<td>Pertubed text instances and indices where</td>
</tr>
<tr>
<td>perturbation were applied.</td>
<td></td>
</tr>
</tbody>
</table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def perturb(self,

                tokenized_instance: Iterable[str],

                n_samples: int = 50,

                sequential: bool = True,

                contiguous: bool = False,

                min_changes: int = 1,

                max_changes: int = 10000,

                add_background_instance: bool = False) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        &quot;&quot;&quot;Perturb a tokenized instance by replacing it with a single replacement token (e.g. &#39;UNKWRDZ&#39;),

        which is assumed not to be part of the original tokens.

        Args:

            tokenized_instance (Iterable[str]): Tokenized instance to apply perturbations to.

            n_samples (int, optional): Number of samples to return. Defaults to 50.

            sequential (bool, optional): Whether to sample sequentially based on length (first length one, then two,

                etc.). Defaults to True.

            contiguous (bool, optional): Whether to remove contiguous sequences of tokens (n-grams). Defaults to False.

            min_changes (int, optional): Minimum number of tokens changes (1+). Defaults to 1.

            max_changes (int, optional): Maximum number of tokens changed. Defaults to 10000.

            add_background_instance (bool, optional): Add an additional instance with all tokens replaced.

                Defaults to False.

        Yields:

            Iterator[Sequence[Iterable[str], Iterable[int]]]: Pertubed text instances and indices where

                perturbation were applied.

        &quot;&quot;&quot;

        instance_len = sum(1 for _ in tokenized_instance)

        min_changes = min(max(min_changes, 1), instance_len)

        max_changes = min(instance_len, max_changes)

        assert min_changes &lt;= max_changes, \

            f&#39;Unable to produce any perturbations since min_changes={min_changes} and max_changes={max_changes}&#39;

        rand = np.random.RandomState(self._seed)

        def get_inactive(inactive_range):

            inactive = TokenReplacement.binary_inactive(inactive_range, instance_len)

            return self._replace(tokenized_instance, inactive), inactive

        if sequential:

            if contiguous:  # n-grams of length size, up to n_samples

                for size in range(min_changes, max_changes + 1):

                    n_contiguous = instance_len - size

                    if n_contiguous &lt;= n_samples:

                        n_samples -= n_contiguous

                        for start in range(instance_len - size + 1):

                            yield get_inactive(range(start, start + size))

                    else:

                        for start in rand.choice(instance_len - size + 1, replace=False):

                            yield get_inactive(range(start, start + size))

                        break

            else:  # used by SHAP

                for size in range(min_changes, max_changes + 1):

                    n_choose_k = math.comb(instance_len, size)

                    if n_choose_k &lt;= n_samples:  # make all combinations of length size

                        n_samples -= n_choose_k

                        for disable in itertools.combinations(range(instance_len), size):

                            yield get_inactive(disable)

                    else:  # fill up remainder with random samples of length size

                        for _ in range(n_samples):

                            yield get_inactive(rand.choice(instance_len, size, replace=False))

                        break

        else:

            sample = rand.randint(min_changes, max_changes + 1, n_samples)

            for size in sample:

                if contiguous:  # use n-grams

                    start = rand.choice(max_changes - size + 1, replace=False)

                    inactive = TokenReplacement.binary_inactive(range(start, start + size), instance_len)

                # used by LIME,

                # https://github.com/marcotcr/lime/blob/a2c7a6fb70bce2e089cb146a31f483bf218875eb/lime/lime_text.py#L436

                else:

                    inactive = TokenReplacement.binary_inactive(rand.choice(instance_len, size, replace=False),

                                                                instance_len)

                yield self._replace(tokenized_instance, inactive), inactive

        if add_background_instance:

            inactive = np.zeros(instance_len)

            yield self._replace(tokenized_instance, inactive), inactive
</code></pre></div>
</td></tr></table>
</details>
<h4 id="register_child">register_child</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_child</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="o">~</span><span class="n">IT</span><span class="p">,</span>
    <span class="n">child</span><span class="p">:</span> <span class="o">~</span><span class="n">IT</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def register_child(self, parent: IT, child: IT) -&gt; None:

        self.env.all_datapoints.add_child(parent, child)
</code></pre></div>
</td></tr></table>
</details>
<h3 id="localtokenpertubator">LocalTokenPertubator</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LocalTokenPertubator</span><span class="p">(</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">instancelib</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">AbstractEnvironment</span><span class="p">[</span><span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">detokenizer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">word_detokenizer</span> <span class="n">at</span> <span class="mh">0x16ddd3f70</span><span class="o">&gt;</span>
<span class="p">)</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>class LocalTokenPertubator(MultiplePertubator[TextInstance],

                           ChildGenerator[TextInstance],

                           Readable):

    def __init__(self,

                 env: Optional[AbstractEnvironment[TextInstance, Any, Any, Any, Any, Any]] = None,

                 detokenizer: Optional[Callable[[Iterable[str]], str]] = default_detokenizer):

        &quot;&quot;&quot;Perturb a single instance into neighborhood samples.

        Args:

            detokenizer (Callable[[Iterable[str]], str]): Mapping back from a tokenized instance

                to a string used in a predictor.

        &quot;&quot;&quot;

        super().__init__()

        if env is None:

            env = TextEnvironment.from_data([], [], [], [], [])

        self.env = env

        self.detokenizer = detokenizer

    @staticmethod

    def binary_inactive(inactive, length) -&gt; np.ndarray:

        res = np.ones(length, dtype=int)

        inactive = [res for res in inactive]

        res[inactive] = 0

        return res

    def perturb(self, tokenized_instance: Iterable[str],

                *args: Any, **kwargs: Any) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        raise NotImplementedError

    def discard_children(self, parent: TextInstance) -&gt; None:

        &quot;&quot;&quot;Discard the generated children for a given parent.&quot;&quot;&quot;

        self.env.discard_children(parent)

    def get_children(self, parent: TextInstance) -&gt; InstanceProvider[TextInstance, Any, Any, Any, Any]:

        &quot;&quot;&quot;Get the children of a given parent.&quot;&quot;&quot;

        return self.env.get_children(parent)

    @text_instance(tokenize=True)

    def __call__(self,

                 instance: TextInstance,

                 discard_children: bool = True,

                 *args,

                 **kwargs) -&gt; Iterator[TextInstance]:

        &quot;&quot;&quot;Apply perturbations to an instance to generate neighborhood data.

        Args:

            instance (TextInstance): Tokenized instance to perturb.

            discard_children (bool, optional): Remove children from previous passes. Defaults to True.

            *args: Arguments to be passed on to `perturb()` function.

            **kwargs: Keyword arguments to be passed on to `perturb()` function.

        Yields:

            Iterator[Sequence[TextInstance]]: Neighborhood data instances.

        &quot;&quot;&quot;

        assert hasattr(instance, &#39;tokenized&#39;), &#39;Tokenize your instance before applying a perturbation&#39;

        if instance.data not in self.env.all_instances.all_data():

            provider = self.env.create_empty_provider()

            provider.add(instance)

        if discard_children:

            self.discard_children(instance)

        for new_tokenized, map_to_original in self.perturb(instance.tokenized, *args, **kwargs):

            new_data = self.detokenizer(new_tokenized)

            new_instance = self.env.create(

                data=new_data,

                vector=None,

                map_to_original=map_to_original,

                representation=new_data,

                tokenized=new_tokenized

                )

            self.register_child(instance, new_instance)

        return self.get_children(instance)
</code></pre></div>
</td></tr></table>
</details>
<hr />
<h4 id="ancestors-in-mro_1">Ancestors (in MRO)</h4>
<ul>
<li>instancelib.pertubations.base.MultiplePertubator</li>
<li>instancelib.pertubations.base.ChildGenerator</li>
<li>abc.ABC</li>
<li>typing.Generic</li>
<li>text_explainability.default.Readable</li>
</ul>
<h4 id="descendants">Descendants</h4>
<ul>
<li>text_explainability.data.augmentation.TokenReplacement</li>
</ul>
<h4 id="static-methods_1">Static methods</h4>
<h4 id="binary_inactive_1">binary_inactive</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">binary_inactive</span><span class="p">(</span>
    <span class="n">inactive</span><span class="p">,</span>
    <span class="n">length</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    @staticmethod

    def binary_inactive(inactive, length) -&gt; np.ndarray:

        res = np.ones(length, dtype=int)

        inactive = [res for res in inactive]

        res[inactive] = 0

        return res
</code></pre></div>
</td></tr></table>
</details>
<h4 id="methods_1">Methods</h4>
<h4 id="discard_children_1">discard_children</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">discard_children</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
<p>Discard the generated children for a given parent.</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def discard_children(self, parent: TextInstance) -&gt; None:

        &quot;&quot;&quot;Discard the generated children for a given parent.&quot;&quot;&quot;

        self.env.discard_children(parent)
</code></pre></div>
</td></tr></table>
</details>
<h4 id="get_children_1">get_children</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">InstanceProvider</span>
</code></pre></div>
</td></tr></table>
<p>Get the children of a given parent.</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def get_children(self, parent: TextInstance) -&gt; InstanceProvider[TextInstance, Any, Any, Any, Any]:

        &quot;&quot;&quot;Get the children of a given parent.&quot;&quot;&quot;

        return self.env.get_children(parent)
</code></pre></div>
</td></tr></table>
</details>
<h4 id="perturb_1">perturb</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perturb</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tokenized_instance</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def perturb(self, tokenized_instance: Iterable[str],

                *args: Any, **kwargs: Any) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        raise NotImplementedError
</code></pre></div>
</td></tr></table>
</details>
<h4 id="register_child_1">register_child</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_child</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="o">~</span><span class="n">IT</span><span class="p">,</span>
    <span class="n">child</span><span class="p">:</span> <span class="o">~</span><span class="n">IT</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def register_child(self, parent: IT, child: IT) -&gt; None:

        self.env.all_datapoints.add_child(parent, child)
</code></pre></div>
</td></tr></table>
</details>
<h3 id="tokenreplacement">TokenReplacement</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TokenReplacement</span><span class="p">(</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">instancelib</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">AbstractEnvironment</span><span class="p">[</span><span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">detokenizer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">word_detokenizer</span> <span class="n">at</span> <span class="mh">0x16ddd3f70</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">replacement</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;UNKWRDZ&#39;</span><span class="p">,</span>
    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">)</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>class TokenReplacement(LocalTokenPertubator):

    def __init__(self,

                 env: Optional[AbstractEnvironment[TextInstance, Any, Any, Any, Any, Any]] = None,

                 detokenizer: Optional[Callable[[Iterable[str]], str]] = default_detokenizer,

                 replacement: Optional[Union[str, List[str]]] = &#39;UNKWRDZ&#39;,

                 seed: int = 0):

        &quot;&quot;&quot;Perturb a tokenized instance by replacing with a set token (e.g. &#39;UNKWRDZ&#39;) or deleting it.

        Args:

            detokenizer (Callable[[Iterable[str]], str]): Mapping back from a tokenized instance to a string used in a

                predictor.

            replacement (Optional[Union[str, List[str]]], optional): Replacement string, or set to None

                if you want to delete the word entirely. Defaults to &#39;UNKWRDZ&#39;.

            seed (int, optional): Seed for reproducibility. Defaults to 0.

        &quot;&quot;&quot;

        super().__init__(env=env, detokenizer=detokenizer)

        self.replacement = replacement

        self._seed = seed

    def _replace(self,

                 tokenized_instance: Iterable[str],

                 keep: Iterable[int]) -&gt; Iterable[str]:

        &quot;&quot;&quot;Apply replacement/deletion to tokenized instance.

        Args:

            tokenized_instance (Iterable[str]): Tokenized instance.

            keep (Iterable[int]): Binary indicator whether to keep (1) or replace (0) a token.

        Returns:

            Iterable[str]: Tokenized instance with perturbation applied.

        &quot;&quot;&quot;

        if not self.replacement or self.replacement is None:

            return [token for token, i in zip(tokenized_instance, keep) if i == 1]

        if isinstance(self.replacement, list):

            instance_len = sum(1 for _ in tokenized_instance)

            replacement_len = len(self.replacement)

            assert replacement_len &gt;= instance_len, \

                f&#39;Too few replacements in `self.replacement`, got {replacement_len} and expected {instance_len}&#39;

            return [self.replacement[i] if j == 0 else token

                    for i, (token, j) in enumerate(zip(tokenized_instance, keep))]

        return [self.replacement if i == 0 else token for token, i in zip(tokenized_instance, keep)]

    def perturb(self,

                tokenized_instance: Iterable[str],

                n_samples: int = 50,

                sequential: bool = True,

                contiguous: bool = False,

                min_changes: int = 1,

                max_changes: int = 10000,

                add_background_instance: bool = False) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        &quot;&quot;&quot;Perturb a tokenized instance by replacing it with a single replacement token (e.g. &#39;UNKWRDZ&#39;),

        which is assumed not to be part of the original tokens.

        Args:

            tokenized_instance (Iterable[str]): Tokenized instance to apply perturbations to.

            n_samples (int, optional): Number of samples to return. Defaults to 50.

            sequential (bool, optional): Whether to sample sequentially based on length (first length one, then two,

                etc.). Defaults to True.

            contiguous (bool, optional): Whether to remove contiguous sequences of tokens (n-grams). Defaults to False.

            min_changes (int, optional): Minimum number of tokens changes (1+). Defaults to 1.

            max_changes (int, optional): Maximum number of tokens changed. Defaults to 10000.

            add_background_instance (bool, optional): Add an additional instance with all tokens replaced.

                Defaults to False.

        Yields:

            Iterator[Sequence[Iterable[str], Iterable[int]]]: Pertubed text instances and indices where

                perturbation were applied.

        &quot;&quot;&quot;

        instance_len = sum(1 for _ in tokenized_instance)

        min_changes = min(max(min_changes, 1), instance_len)

        max_changes = min(instance_len, max_changes)

        assert min_changes &lt;= max_changes, \

            f&#39;Unable to produce any perturbations since min_changes={min_changes} and max_changes={max_changes}&#39;

        rand = np.random.RandomState(self._seed)

        def get_inactive(inactive_range):

            inactive = TokenReplacement.binary_inactive(inactive_range, instance_len)

            return self._replace(tokenized_instance, inactive), inactive

        if sequential:

            if contiguous:  # n-grams of length size, up to n_samples

                for size in range(min_changes, max_changes + 1):

                    n_contiguous = instance_len - size

                    if n_contiguous &lt;= n_samples:

                        n_samples -= n_contiguous

                        for start in range(instance_len - size + 1):

                            yield get_inactive(range(start, start + size))

                    else:

                        for start in rand.choice(instance_len - size + 1, replace=False):

                            yield get_inactive(range(start, start + size))

                        break

            else:  # used by SHAP

                for size in range(min_changes, max_changes + 1):

                    n_choose_k = math.comb(instance_len, size)

                    if n_choose_k &lt;= n_samples:  # make all combinations of length size

                        n_samples -= n_choose_k

                        for disable in itertools.combinations(range(instance_len), size):

                            yield get_inactive(disable)

                    else:  # fill up remainder with random samples of length size

                        for _ in range(n_samples):

                            yield get_inactive(rand.choice(instance_len, size, replace=False))

                        break

        else:

            sample = rand.randint(min_changes, max_changes + 1, n_samples)

            for size in sample:

                if contiguous:  # use n-grams

                    start = rand.choice(max_changes - size + 1, replace=False)

                    inactive = TokenReplacement.binary_inactive(range(start, start + size), instance_len)

                # used by LIME,

                # https://github.com/marcotcr/lime/blob/a2c7a6fb70bce2e089cb146a31f483bf218875eb/lime/lime_text.py#L436

                else:

                    inactive = TokenReplacement.binary_inactive(rand.choice(instance_len, size, replace=False),

                                                                instance_len)

                yield self._replace(tokenized_instance, inactive), inactive

        if add_background_instance:

            inactive = np.zeros(instance_len)

            yield self._replace(tokenized_instance, inactive), inactive
</code></pre></div>
</td></tr></table>
</details>
<hr />
<h4 id="ancestors-in-mro_2">Ancestors (in MRO)</h4>
<ul>
<li>text_explainability.data.augmentation.LocalTokenPertubator</li>
<li>instancelib.pertubations.base.MultiplePertubator</li>
<li>instancelib.pertubations.base.ChildGenerator</li>
<li>abc.ABC</li>
<li>typing.Generic</li>
<li>text_explainability.default.Readable</li>
</ul>
<h4 id="descendants_1">Descendants</h4>
<ul>
<li>text_explainability.data.augmentation.LeaveOut</li>
</ul>
<h4 id="static-methods_2">Static methods</h4>
<h4 id="binary_inactive_2">binary_inactive</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">binary_inactive</span><span class="p">(</span>
    <span class="n">inactive</span><span class="p">,</span>
    <span class="n">length</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    @staticmethod

    def binary_inactive(inactive, length) -&gt; np.ndarray:

        res = np.ones(length, dtype=int)

        inactive = [res for res in inactive]

        res[inactive] = 0

        return res
</code></pre></div>
</td></tr></table>
</details>
<h4 id="methods_2">Methods</h4>
<h4 id="discard_children_2">discard_children</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">discard_children</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
<p>Discard the generated children for a given parent.</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def discard_children(self, parent: TextInstance) -&gt; None:

        &quot;&quot;&quot;Discard the generated children for a given parent.&quot;&quot;&quot;

        self.env.discard_children(parent)
</code></pre></div>
</td></tr></table>
</details>
<h4 id="get_children_2">get_children</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">TextInstance</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">instancelib</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">InstanceProvider</span>
</code></pre></div>
</td></tr></table>
<p>Get the children of a given parent.</p>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def get_children(self, parent: TextInstance) -&gt; InstanceProvider[TextInstance, Any, Any, Any, Any]:

        &quot;&quot;&quot;Get the children of a given parent.&quot;&quot;&quot;

        return self.env.get_children(parent)
</code></pre></div>
</td></tr></table>
</details>
<h4 id="perturb_2">perturb</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">perturb</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tokenized_instance</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">n_samples</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
    <span class="n">sequential</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">contiguous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">min_changes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">max_changes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="n">add_background_instance</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span>
</code></pre></div>
</td></tr></table>
<p>Perturb a tokenized instance by replacing it with a single replacement token (e.g. 'UNKWRDZ'), </p>
<p>which is assumed not to be part of the original tokens.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>tokenized_instance</td>
<td>Iterable[str]</td>
<td>Tokenized instance to apply perturbations to.</td>
<td>None</td>
</tr>
<tr>
<td>n_samples</td>
<td>int</td>
<td>Number of samples to return. Defaults to 50.</td>
<td>50</td>
</tr>
<tr>
<td>sequential</td>
<td>bool</td>
<td>Whether to sample sequentially based on length (first length one, then two,</td>
<td></td>
</tr>
<tr>
<td>etc.). Defaults to True.</td>
<td>None</td>
<td></td>
<td></td>
</tr>
<tr>
<td>contiguous</td>
<td>bool</td>
<td>Whether to remove contiguous sequences of tokens (n-grams). Defaults to False.</td>
<td>False</td>
</tr>
<tr>
<td>min_changes</td>
<td>int</td>
<td>Minimum number of tokens changes (1+). Defaults to 1.</td>
<td>1</td>
</tr>
<tr>
<td>max_changes</td>
<td>int</td>
<td>Maximum number of tokens changed. Defaults to 10000.</td>
<td>10000</td>
</tr>
<tr>
<td>add_background_instance</td>
<td>bool</td>
<td>Add an additional instance with all tokens replaced.</td>
<td></td>
</tr>
<tr>
<td>Defaults to False.</td>
<td>None</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Yields:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Iterator[Sequence[Iterable[str], Iterable[int]]]</td>
<td>Pertubed text instances and indices where</td>
</tr>
<tr>
<td>perturbation were applied.</td>
<td></td>
</tr>
</tbody>
</table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def perturb(self,

                tokenized_instance: Iterable[str],

                n_samples: int = 50,

                sequential: bool = True,

                contiguous: bool = False,

                min_changes: int = 1,

                max_changes: int = 10000,

                add_background_instance: bool = False) -&gt; Iterator[Tuple[Iterable[str], Iterable[int]]]:

        &quot;&quot;&quot;Perturb a tokenized instance by replacing it with a single replacement token (e.g. &#39;UNKWRDZ&#39;),

        which is assumed not to be part of the original tokens.

        Args:

            tokenized_instance (Iterable[str]): Tokenized instance to apply perturbations to.

            n_samples (int, optional): Number of samples to return. Defaults to 50.

            sequential (bool, optional): Whether to sample sequentially based on length (first length one, then two,

                etc.). Defaults to True.

            contiguous (bool, optional): Whether to remove contiguous sequences of tokens (n-grams). Defaults to False.

            min_changes (int, optional): Minimum number of tokens changes (1+). Defaults to 1.

            max_changes (int, optional): Maximum number of tokens changed. Defaults to 10000.

            add_background_instance (bool, optional): Add an additional instance with all tokens replaced.

                Defaults to False.

        Yields:

            Iterator[Sequence[Iterable[str], Iterable[int]]]: Pertubed text instances and indices where

                perturbation were applied.

        &quot;&quot;&quot;

        instance_len = sum(1 for _ in tokenized_instance)

        min_changes = min(max(min_changes, 1), instance_len)

        max_changes = min(instance_len, max_changes)

        assert min_changes &lt;= max_changes, \

            f&#39;Unable to produce any perturbations since min_changes={min_changes} and max_changes={max_changes}&#39;

        rand = np.random.RandomState(self._seed)

        def get_inactive(inactive_range):

            inactive = TokenReplacement.binary_inactive(inactive_range, instance_len)

            return self._replace(tokenized_instance, inactive), inactive

        if sequential:

            if contiguous:  # n-grams of length size, up to n_samples

                for size in range(min_changes, max_changes + 1):

                    n_contiguous = instance_len - size

                    if n_contiguous &lt;= n_samples:

                        n_samples -= n_contiguous

                        for start in range(instance_len - size + 1):

                            yield get_inactive(range(start, start + size))

                    else:

                        for start in rand.choice(instance_len - size + 1, replace=False):

                            yield get_inactive(range(start, start + size))

                        break

            else:  # used by SHAP

                for size in range(min_changes, max_changes + 1):

                    n_choose_k = math.comb(instance_len, size)

                    if n_choose_k &lt;= n_samples:  # make all combinations of length size

                        n_samples -= n_choose_k

                        for disable in itertools.combinations(range(instance_len), size):

                            yield get_inactive(disable)

                    else:  # fill up remainder with random samples of length size

                        for _ in range(n_samples):

                            yield get_inactive(rand.choice(instance_len, size, replace=False))

                        break

        else:

            sample = rand.randint(min_changes, max_changes + 1, n_samples)

            for size in sample:

                if contiguous:  # use n-grams

                    start = rand.choice(max_changes - size + 1, replace=False)

                    inactive = TokenReplacement.binary_inactive(range(start, start + size), instance_len)

                # used by LIME,

                # https://github.com/marcotcr/lime/blob/a2c7a6fb70bce2e089cb146a31f483bf218875eb/lime/lime_text.py#L436

                else:

                    inactive = TokenReplacement.binary_inactive(rand.choice(instance_len, size, replace=False),

                                                                instance_len)

                yield self._replace(tokenized_instance, inactive), inactive

        if add_background_instance:

            inactive = np.zeros(instance_len)

            yield self._replace(tokenized_instance, inactive), inactive
</code></pre></div>
</td></tr></table>
</details>
<h4 id="register_child_2">register_child</h4>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_child</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="o">~</span><span class="n">IT</span><span class="p">,</span>
    <span class="n">child</span><span class="p">:</span> <span class="o">~</span><span class="n">IT</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
<details class="example"><summary>View Source</summary><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    def register_child(self, parent: IT, child: IT) -&gt; None:

        self.env.all_datapoints.add_child(parent, child)
</code></pre></div>
</td></tr></table>
</details>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../utils/" title="Utils" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Utils
              </span>
            </div>
          </a>
        
        
          <a href="../embedding/" title="Embedding" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Embedding
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/MarcelRobeer/Text_Explainability" target="_blank" rel="noopener" title="text_explainability on GitHub" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.53c85856.min.js", "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.716f8af4.min.js"></script>
      
    
  </body>
</html>